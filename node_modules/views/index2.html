<!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta charset='utf-8' />
    <title>상태</title>
    <script>
      var socket = io();
      var soilState, relayState, modeCheck, relayCheck, mode, relay;

      var readSensor = setInterval(function(){
        modeCheck = $('#modeCheck').prop("checked");
        relayCheck = $('#relayCheck').prop("checked");

        console.log(modeCheck);
        console.log(relayCheck);

        if(modeCheck){mode = "MANUAL";}else{mode = "AUTO";}
        if(relayCheck){relay = "HIGH";}else{relay = "LOW";}

        console.log(mode);
        console.log(relay);

        socket.emit('dataRequest',{mode:mode, relay:relay});

        socket.on('sensorData',function(data){
          soilState = data.soilHumid;
          relayState = data.relay;
        });

        $('#soilValue').html(soilState);
        $('#relayValue').html(relayState);
      }, 2000);
      

    </script>
     
  </head>
  <body>
    Soil Sensor: <div id="soilValue">aa</div> &nbsp
    Relay State: <div id="relayValue">aa</div>


    Mode: (check: Manual, uncheck: Auto)!&nbsp
    <input type="checkbox" id="modeCheck"> &nbsp
    Relay: (check: ON, uncheck: OFF)!&nbsp
    <input type="checkbox" id="relayCheck">
 
  </body>
</html>


